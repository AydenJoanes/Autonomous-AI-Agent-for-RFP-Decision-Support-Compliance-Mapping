2026-01-21 17:33:59.444 | INFO     | src.app.database.connection:<module>:21 - Connecting to database at postgresql+psycopg2://****:****@localhost:5432/rfp_bid_db
2026-01-21 17:33:59.531 | INFO     | src.app.agent.tools:<module>:20 - [INIT] Importing reasoning tools...
2026-01-21 17:33:59.532 | INFO     | src.app.agent.tools:<module>:39 - [INIT] REASONING_TOOLS loaded: 6 tools
2026-01-21 17:33:59.532 | INFO     | src.app.agent.tools:<module>:51 - [INIT] ALL_TOOLS loaded: 8 tools
2026-01-21 17:33:59.532 | INFO     | src.app.agent.tools:<module>:64 - [INIT] Tools package initialized successfully
test_10_1_full_pipeline (__main__.TestPhase5E2E.test_10_1_full_pipeline)
Test Full Pipeline with Mocked External Calls ... 2026-01-21 17:33:59.637 | INFO     | src.app.services.tool_executor:__init__:40 - [EXECUTOR] Initialized with 6 tools
2026-01-21 17:33:59.637 | INFO     | src.app.services.justification_generator:__init__:154 - [JUSTIFICATION] Initialized with model=gpt-4o-mini, temp=0.3
2026-01-21 17:33:59.637 | INFO     | src.app.services.recommendation_service:__init__:45 - [SERVICE] RecommendationService initialized with all dependencies
2026-01-21 17:33:59.637 | INFO     | src.app.agent.recommendation_agent:__init__:24 - [AGENT] RecommendationAgent initialized
2026-01-21 17:33:59.638 | INFO     | src.app.agent.recommendation_agent:run_with_report:73 - [AGENT] Processing RFP with report: data/sample_rfps/dummy_test.pdf
2026-01-21 17:33:59.638 | INFO     | src.app.agent.recommendation_agent:run:40 - [AGENT] Processing RFP: data/sample_rfps/dummy_test.pdf
2026-01-21 17:33:59.638 | INFO     | src.app.services.recommendation_service:generate_recommendation:277 - [SERVICE] Starting recommendation generation for data/sample_rfps/dummy_test.pdf
2026-01-21 17:33:59.638 | INFO     | src.app.services.recommendation_service:process_rfp:61 - [SERVICE] Processing RFP: data/sample_rfps/dummy_test.pdf
2026-01-21 17:33:59.638 | INFO     | src.app.services.recommendation_service:process_rfp:95 - [SERVICE] Parsed RFP: 16 words, 2 requirements
2026-01-21 17:33:59.638 | INFO     | src.app.services.recommendation_service:analyze_requirements:133 - [SERVICE] Analyzing 2 requirements
2026-01-21 17:33:59.638 | INFO     | src.app.services.tool_executor:execute_all_tools:232 - [EXECUTOR] Starting tool execution for 2 requirements
2026-01-21 17:33:59.638 | INFO     | src.app.services.value_extractor:extract_budget:36 - [EXTRACTOR] Budget extracted: 150000 from "Budget: $150,000..."
2026-01-21 17:33:59.639 | DEBUG    | src.app.services.value_extractor:extract_timeline:125 - [EXTRACTOR] No timeline found in "Budget: $150,000..."
2026-01-21 17:33:59.639 | DEBUG    | src.app.services.value_extractor:extract_certification:183 - [EXTRACTOR] No certification found in "Budget: $150,000..."
2026-01-21 17:33:59.639 | DEBUG    | src.app.services.value_extractor:extract_technology:256 - [EXTRACTOR] No technology found in "Budget: $150,000..."
2026-01-21 17:33:59.639 | DEBUG    | src.app.services.tool_executor:match_requirements_to_tools:215 - [EXECUTOR] Skipping knowledge_query for 'Budget: $150,000...' - no valid 1536-dim embedding
2026-01-21 17:33:59.639 | DEBUG    | src.app.services.tool_executor:match_requirements_to_tools:217 - [EXECUTOR] Matched 'Budget: $150,000...' to budget_analyzer (score: 5)
2026-01-21 17:33:59.640 | DEBUG    | src.app.services.value_extractor:extract_budget:67 - [EXTRACTOR] No budget found in "Must use Python..."
2026-01-21 17:33:59.640 | DEBUG    | src.app.services.value_extractor:extract_timeline:125 - [EXTRACTOR] No timeline found in "Must use Python..."
2026-01-21 17:33:59.640 | DEBUG    | src.app.services.value_extractor:extract_certification:183 - [EXTRACTOR] No certification found in "Must use Python..."
2026-01-21 17:33:59.640 | INFO     | src.app.services.value_extractor:extract_technology:252 - [EXTRACTOR] Technology extracted: Python from "Must use Python..."
2026-01-21 17:33:59.640 | DEBUG    | src.app.services.tool_executor:match_requirements_to_tools:215 - [EXECUTOR] Skipping knowledge_query for 'Must use Python...' - no valid 1536-dim embedding
2026-01-21 17:33:59.640 | DEBUG    | src.app.services.tool_executor:match_requirements_to_tools:217 - [EXECUTOR] Matched 'Must use Python...' to tech_validator (score: 3)
2026-01-21 17:33:59.640 | INFO     | src.app.services.tool_executor:match_requirements_to_tools:219 - [EXECUTOR] Matched 2 requirements to tools
2026-01-21 17:33:59.640 | INFO     | src.app.agent.tools.tech_validator_tool:_run:23 - TechValidatorTool: Validating 'Python'
2026-01-21 17:33:59.677 | DEBUG    | src.app.database.connection:receive_connect:36 - Database connection established
2026-01-21 17:33:59.680 | DEBUG    | src.app.database.repositories.base_repository:execute_query:45 - Query executed in 39.30ms: 
            SELECT * FROM tech_stacks 
            WHERE LOWER(technology) = LOWER(:tech_name)
    ...
C:\Users\ponna\anaconda3\Lib\site-packages\pydantic\main.py:193: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  self.__pydantic_validator__.validate_python(data, self_instance=self)
2026-01-21 17:33:59.685 | INFO     | src.app.services.tool_executor:_execute_single_tool:90 - [EXECUTOR] tech_validator completed: ComplianceLevel.COMPLIANT, confidence=1.0
2026-01-21 17:33:59.685 | INFO     | src.app.agent.tools.budget_analyzer_tool:_run:23 - BudgetAnalyzerTool: Analyzing budget '150000'
2026-01-21 17:33:59.691 | DEBUG    | src.app.database.repositories.base_repository:execute_query:45 - Query executed in 5.17ms: SELECT * FROM project_portfolio ORDER BY created_at DESC...
2026-01-21 17:33:59.691 | INFO     | src.app.services.tool_executor:_execute_single_tool:90 - [EXECUTOR] budget_analyzer completed: ComplianceLevel.COMPLIANT, confidence=1.0
2026-01-21 17:33:59.693 | INFO     | src.app.services.tool_executor:execute_all_tools:245 - [EXECUTOR] Tool execution complete: 2 results
2026-01-21 17:33:59.693 | INFO     | src.app.services.recommendation_service:analyze_requirements:158 - [SERVICE] Analysis complete: ComplianceLevel.COMPLIANT
2026-01-21 17:33:59.693 | INFO     | src.app.services.tool_executor:extract_risks_from_results:321 - [EXECUTOR] Extracted 0 risks from 2 results
2026-01-21 17:33:59.693 | INFO     | src.app.services.recommendation_service:generate_recommendation:294 - [SERVICE] Extracted 0 risks
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.decision_engine:_log_trace:66 - [DECISION_TRACE] Base score for ComplianceLevel.COMPLIANT: 90
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.decision_engine:_log_trace:66 - [DECISION_TRACE] Mandatory met: +10
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.decision_engine:_log_trace:66 - [DECISION_TRACE] Confidence avg adjustment: +4.0
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.decision_engine:_log_trace:66 - [DECISION_TRACE] Penalties: 0 (capped to 0)
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.decision_engine:_log_trace:66 - [DECISION_TRACE] Final confidence score: 100
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.decision_engine:_log_trace:66 - [DECISION_TRACE] Decision: BID (confidence 100 >= 80)
2026-01-21 17:33:59.693 | INFO     | src.app.services.recommendation_service:generate_recommendation:298 - [SERVICE] Decision: RecommendationDecision.BID (confidence: 100)
2026-01-21 17:33:59.693 | INFO     | src.app.services.justification_generator:generate:380 - [JUSTIFICATION] Starting justification generation
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.justification_generator:_generate_with_retry:239 - [JUSTIFICATION] LLM response received: 19 chars
2026-01-21 17:33:59.693 | WARNING  | src.app.services.justification_generator:generate_justification:325 - [JUSTIFICATION] Using fallback template for justification
2026-01-21 17:33:59.693 | DEBUG    | src.app.services.justification_generator:_generate_with_retry:239 - [JUSTIFICATION] LLM response received: 19 chars
2026-01-21 17:33:59.693 | WARNING  | src.app.services.justification_generator:generate_executive_summary:360 - [JUSTIFICATION] Using fallback template for executive summary
2026-01-21 17:33:59.693 | INFO     | src.app.services.justification_generator:generate:400 - [JUSTIFICATION] Complete: justification=592 chars, summary=134 chars
2026-01-21 17:33:59.693 | INFO     | src.app.services.recommendation_service:generate_recommendation:321 - [SERVICE] Recommendation complete in 0.06s: BID
2026-01-21 17:33:59.693 | INFO     | src.app.agent.recommendation_agent:run:44 - [AGENT] Recommendation complete: BID
2026-01-21 17:33:59.693 | INFO     | src.app.services.recommendation_service:generate_recommendation_report:399 - [SERVICE] Generating recommendation report
2026-01-21 17:33:59.693 | INFO     | src.app.services.recommendation_service:generate_recommendation_report:476 - [SERVICE] Report generated: 1838 chars
2026-01-21 17:33:59.693 | INFO     | src.app.agent.recommendation_agent:run_with_report:81 - [AGENT] Report generated: 1838 chars
ok

----------------------------------------------------------------------
Ran 1 test in 0.058s

OK
End-to-End Integration Test Results:

Running E2E on data/sample_rfps/dummy_test.pdf...
Time: 0.06s
 Report saved.
